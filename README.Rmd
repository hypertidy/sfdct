---
output:
  md_document:
    variant: markdown_github
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

[![Travis-CI Build Status](https://travis-ci.org/r-gris/sfct.svg?branch=master)](https://travis-ci.org/r-gris/sfct)
[![AppVeyor Build Status](https://ci.appveyor.com/api/projects/status/github/r-gris/sfct?branch=master&svg=true)](https://ci.appveyor.com/project/r-gris/sfct)
[![CRAN_Status_Badge](http://www.r-pkg.org/badges/version/sfct)](https://cran.r-project.org/package=sfct)


```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
```

# sfct

The goal of sfct is to provide constrained triangulations of simple features. 

## Example

This is a basic example which shows you how to decompose a MULTIPOLYGON `sf` data frame object into a GEOMETRYCOLLECTION `sf` data frame object made of triangles:

```{r example}
library(sf)
library(sfct)
nc <- st_read(system.file("shape/nc.shp", package="sf"))
nc_triangles <- ct_triangulate(nc)
plot(nc_triangles[, c("PERIMETER", "NAME")])
```

We can use the underlying `RTriangle::triangulate` arguments to hone the triangles we get. 

```{r hone}
i_feature <- 25
nc1 <- nc[c(i_feature, unlist(st_touches(nc[i_feature, ], nc))), ]
plot(nc1[, c("AREA", "NAME")])

## subvert st_area because we really don't want m^2
st_crs(nc1) <- NA
areas <- st_area(nc1)
st_crs(nc1) <- st_crs(nc)
nc1_triangles <- ct_triangulate(nc1, a = min(areas)/5)
plot(nc1_triangles[, c("AREA", "NAME")])

nc2_triangles <- ct_triangulate(nc1, a = min(st_area(nc1))/25)
plot(nc2_triangles[, c("AREA", "NAME")])

```

Get a grouped triangulated set from a MULTIPOINT. 

```{r MULTIPOINT}
mtriangs <- ct_triangulate(st_cast(nc1, "MULTIPOINT"), a = 0.001)
plot(mtriangs[, 1], col = viridis::viridis(nrow(mtriangs)))
```

Please note that this project is released with a [Contributor Code of Conduct](CONDUCT.md). By participating in this project you agree to abide by its terms.
